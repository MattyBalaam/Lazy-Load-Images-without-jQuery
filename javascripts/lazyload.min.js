/*!
 * Lazy Load Images without jQuery
 * http://ezyz.github.com/Lazy-Load-Images-without-jQuery/
 *
 * (c) 2012 Mike Pulaski. http://www.mikepulaski.com
 * Modified and maintained by Yifei Zhang. http://yifei.co
 */
(function(){var e=window.addEventListener||function(e,t){window.attachEvent("on"+e,t)},t=window.removeEventListener||function(e,t,n){window.detachEvent("on"+e,t)},n={cache:[],mobileScreenSize:500,addObservers:function(){e("scroll",n.throttledLoad),e("resize",n.throttledLoad)},removeObservers:function(){t("scroll",n.throttledLoad,!1),t("resize",n.throttledLoad,!1)},throttleTimer:(new Date).getTime(),throttledLoad:function(){var e=(new Date).getTime();e-n.throttleTimer>=250&&(n.throttleTimer=e,n.loadVisibleImages())},loadVisibleImages:function(){var e=window.pageYOffset||document.documentElement.scrollTop,t=window.innerHeight||document.documentElement.clientHeight,r={min:e-200,max:e+t+200},i=0;while(i<n.cache.length){var s=n.cache[i],o=s.offsetTop,u=s.height||0;if(o>=r.min-u&&o<=r.max){var a=s.getAttribute("data-src-mobile");s.onload=function(){this.className="lazy-loaded"},a&&screen.width<=n.mobileScreenSize?s.src=a:s.src=s.getAttribute("data-src"),s.removeAttribute("data-src"),s.removeAttribute("data-src-mobile"),n.cache.splice(i,1);continue}i++}n.cache.length===0&&n.removeObservers()},init:function(){document.querySelectorAll||(document.querySelectorAll=function(e){var t=document,n=t.documentElement.firstChild,r=t.createElement("STYLE");return n.appendChild(r),t.__qsaels=[],r.styleSheet.cssText=e+"{x:expression(document.__qsaels.push(this))}",window.scrollBy(0,0),t.__qsaels}),e("load",function r(){var e=document.querySelectorAll("img[data-src]");for(var i=0;i<e.length;i++){var s=e[i];n.cache.push(s)}n.addObservers(),n.loadVisibleImages(),t("load",r,!1)})}};n.init()})()
